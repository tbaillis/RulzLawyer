<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RulzLawyer Debug Console</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #1a1a2e;
            color: #e8e6e3;
            margin: 0;
            padding: 20px;
        }
        .debug-container {
            max-width: 800px;
            margin: 0 auto;
            background: #16213e;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #d4af37;
        }
        .test-button {
            background: linear-gradient(135deg, #4a9eff, #0066cc);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            background: linear-gradient(135deg, #66b3ff, #0080ff);
        }
        .debug-output {
            background: #0a0a0a;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #444;
        }
        .status-ok { color: #4CAF50; }
        .status-error { color: #f44336; }
        .status-warning { color: #ff9800; }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1>üîß RulzLawyer Debug Console</h1>
        <p>This tool will diagnose exactly what's happening with the application loading.</p>

        <div>
            <button class="test-button" onclick="checkGameEngine()">Check Game Engine</button>
            <button class="test-button" onclick="checkWebInterface()">Check Web Interface</button>
            <button class="test-button" onclick="checkGlobalFunctions()">Check Global Functions</button>
            <button class="test-button" onclick="testButtonClicks()">Test Button Clicks</button>
            <button class="test-button" onclick="runFullDiagnostic()">Full Diagnostic</button>
        </div>

        <div id="debug-output" class="debug-output">
            Debug console initialized. Click buttons above to run tests.
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const output = document.getElementById('debug-output');
            const className = type === 'error' ? 'status-error' : 
                             type === 'warning' ? 'status-warning' : 'status-ok';
            
            output.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }

        function checkGameEngine() {
            log('Checking Game Engine...', 'info');
            
            if (typeof window.gameEngine !== 'undefined') {
                log('‚úÖ Game Engine found!', 'info');
                log('Game Engine type: ' + typeof window.gameEngine, 'info');
                
                if (window.gameEngine.diceEngine) {
                    log('‚úÖ Dice Engine loaded', 'info');
                } else {
                    log('‚ùå Dice Engine not loaded', 'error');
                }
                
                if (window.gameEngine.characterManager) {
                    log('‚úÖ Character Manager loaded', 'info');
                } else {
                    log('‚ùå Character Manager not loaded', 'error');
                }
            } else {
                log('‚ùå Game Engine not found in window object', 'error');
            }
        }

        function checkWebInterface() {
            log('Checking Web Interface...', 'info');
            
            if (typeof webInterface !== 'undefined') {
                log('‚úÖ Web Interface found!', 'info');
                log('Web Interface type: ' + typeof webInterface, 'info');
                
                if (webInterface.gameEngine) {
                    log('‚úÖ Web Interface has game engine reference', 'info');
                } else {
                    log('‚ùå Web Interface missing game engine reference', 'error');
                }
            } else {
                log('‚ùå Web Interface not found', 'error');
            }
        }

        function checkGlobalFunctions() {
            log('Checking Global Functions...', 'info');
            
            const functionsToCheck = [
                'rollDice', 'createNewCharacter', 'showCharacterStats',
                'rollAdvantage', 'rollDisadvantage', 'generateAdventure',
                'rollRandomTables', 'closeModal'
            ];
            
            functionsToCheck.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    log(`‚úÖ ${funcName} is available`, 'info');
                } else {
                    log(`‚ùå ${funcName} not found`, 'error');
                }
            });
        }

        function testButtonClicks() {
            log('Testing Button Clicks...', 'info');
            
            // Test dice roll function directly
            try {
                if (typeof window.rollDice === 'function') {
                    log('‚úÖ rollDice function exists, trying to call it...', 'info');
                    window.rollDice();
                    log('‚úÖ rollDice called without error', 'info');
                } else {
                    log('‚ùå rollDice function not found', 'error');
                }
            } catch (error) {
                log('‚ùå rollDice failed: ' + error.message, 'error');
            }
            
            // Test character creation
            try {
                if (typeof window.createNewCharacter === 'function') {
                    log('‚úÖ createNewCharacter function exists, trying to call it...', 'info');
                    window.createNewCharacter();
                    log('‚úÖ createNewCharacter called without error', 'info');
                } else {
                    log('‚ùå createNewCharacter function not found', 'error');
                }
            } catch (error) {
                log('‚ùå createNewCharacter failed: ' + error.message, 'error');
            }
        }

        function runFullDiagnostic() {
            log('üöÄ Running Full Diagnostic...', 'info');
            log('='.repeat(50), 'info');
            
            setTimeout(() => checkGameEngine(), 100);
            setTimeout(() => checkWebInterface(), 200);
            setTimeout(() => checkGlobalFunctions(), 300);
            setTimeout(() => testButtonClicks(), 400);
            setTimeout(() => {
                log('='.repeat(50), 'info');
                log('üèÅ Diagnostic complete', 'info');
            }, 500);
        }

        // Auto-run basic check on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                log('üîç Page loaded, running automatic check...');
                checkGameEngine();
                checkWebInterface();
            }, 2000); // Give time for scripts to load
        });
    </script>
</body>
</html>