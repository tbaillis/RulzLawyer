# JavaScript D&D Character Creator - Agent Implementation Instructions

## ðŸš¨ CRITICAL CODE PLACEMENT RULE
**ALL CODE GENERATED BY AI MUST BE PLACED EXCLUSIVELY IN THE `code-repository/` FOLDER OR ITS SUBFOLDERS**

This is non-negotiable. Any code placed outside this folder violates project standards and must be moved immediately.

## Project Overview
You are implementing a web-based D&D 3.5 character creation tool using ONLY JavaScript (ES6+), HTML5, and CSS3. No external frameworks, no Python, no server-side components. The implementation must follow the central character object architecture and comply with all D&D 3.5 SRD rules.

## Implementation Requirements

### Language and Technology Constraints
- **JavaScript Only**: ES6+ features allowed, no TypeScript
- **No External Frameworks**: No React, Vue, Angular, jQuery, etc.
- **No Build Tools**: Must run directly in browser without compilation
- **Browser Compatibility**: Chrome 100+, Firefox 90+, Safari 15+, Edge 100+
- **Local Storage**: For character data persistence
- **No Server**: Pure client-side application

### Code Organization
```
code-repository/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ character.js          # Central character object
â”‚   â”œâ”€â”€ managers/
â”‚   â”‚   â”œâ”€â”€ character-manager.js  # Character lifecycle management
â”‚   â”‚   â”œâ”€â”€ race-manager.js       # Race selection and application
â”‚   â”‚   â”œâ”€â”€ class-manager.js      # Class selection and progression
â”‚   â”‚   â”œâ”€â”€ ability-manager.js    # Ability score generation
â”‚   â”‚   â”œâ”€â”€ skill-manager.js      # Skill point allocation
â”‚   â”‚   â”œâ”€â”€ feat-manager.js       # Feat selection and validation
â”‚   â”‚   â””â”€â”€ equipment-manager.js  # Equipment and inventory
â”‚   â”œâ”€â”€ engines/
â”‚   â”‚   â””â”€â”€ rules-engine.js       # D&D 3.5 rule validation
â”‚   â”œâ”€â”€ dice/                     # HIGH-PERFORMANCE DICE SUBSYSTEM
â”‚   â”‚   â”œâ”€â”€ dice-engine.js        # Core CSPRNG dice engine
â”‚   â”‚   â”œâ”€â”€ dice-parser.js        # Complex dice expression parser
â”‚   â”‚   â”œâ”€â”€ dice-roller.js        # High-performance rolling operations
â”‚   â”‚   â”œâ”€â”€ dice-validator.js     # Statistical validation and testing
â”‚   â”‚   â”œâ”€â”€ roll-history.js       # Roll history and analytics
â”‚   â”‚   â””â”€â”€ dice-animation.js     # Visual dice rolling effects
â”‚   â”œâ”€â”€ epic/                     # EPIC LEVEL PROGRESSION SYSTEM
â”‚   â”‚   â”œâ”€â”€ epic-level-engine.js  # Epic progression engine
â”‚   â”‚   â”œâ”€â”€ divine-ascension-manager.js # Divine rank management
â”‚   â”‚   â”œâ”€â”€ epic-feat-selector.js # Epic feat validation
â”‚   â”‚   â”œâ”€â”€ epic-spellcaster.js   # Epic spellcaster progression
â”‚   â”‚   â””â”€â”€ epic-multiclass.js    # Epic multiclass rules
â”‚   â”œâ”€â”€ story/                    # STORY TRACKER SYSTEM
â”‚   â”‚   â”œâ”€â”€ story-tracker.js      # Story tracking engine
â”‚   â”‚   â”œâ”€â”€ backstory-generator.js # Automatic backstory generation
â”‚   â”‚   â”œâ”€â”€ story-event-manager.js # Timeline and event tracking
â”‚   â”‚   â”œâ”€â”€ relationship-manager.js # Character relationship system
â”‚   â”‚   â”œâ”€â”€ narrative-templates.js # Template-based story construction
â”‚   â”‚   â””â”€â”€ story-integration.js  # Character sheet integration
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ ui-controller.js      # User interface coordination
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ srd-races.js          # Race definitions from SRD
â”‚   â”‚   â”œâ”€â”€ srd-classes.js        # Class definitions from SRD
â”‚   â”‚   â”œâ”€â”€ srd-skills.js         # Skill definitions from SRD
â”‚   â”‚   â”œâ”€â”€ srd-feats.js          # Feat definitions from SRD
â”‚   â”‚   â”œâ”€â”€ srd-equipment.js      # Equipment definitions from SRD
â”‚   â”‚   â”œâ”€â”€ epic-rules/           # Epic level data and rules
â”‚   â”‚   â”œâ”€â”€ story-templates/      # Story generation templates
â”‚   â”‚   â””â”€â”€ dice-rules/           # Dice system data and presets
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ calculator.js         # Mathematical calculations
â”‚       â””â”€â”€ validator.js          # Data validation functions
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ api-documentation.md
â”‚   â”œâ”€â”€ implementation-guide.md
â”‚   â””â”€â”€ testing-guide.md
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ e2e/
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ sample-characters/
â”‚   â””â”€â”€ usage-examples/
â”œâ”€â”€ index.html                    # Main application entry
â”œâ”€â”€ styles.css                    # Application styling
â””â”€â”€ README.md                     # Implementation documentation
```

### MANDATORY SYSTEMS - MUST BE IMPLEMENTED

#### ðŸ”¥ Epic Level Progression System (FR-008) - REQUIRED
**ALL D&D Character Creator implementations MUST include Epic Level support for levels 21-100.**

**Epic Level Engine Directory Structure:**
```
code-repository/src/epic/
â”œâ”€â”€ epic-level-engine.js          # Core EpicLevelEngine class
â”œâ”€â”€ divine-ascension-manager.js   # Divine rank and power management  
â”œâ”€â”€ epic-feat-selector.js         # Epic feat validation and selection
â”œâ”€â”€ epic-spellcaster.js          # Epic spellcaster progression
â””â”€â”€ epic-multiclass.js           # Epic multiclass rules engine

code-repository/src/data/epic-rules/
â”œâ”€â”€ epic-progression-tables.js    # Level-based progression data
â”œâ”€â”€ divine-abilities.js           # Divine rank powers and restrictions
â”œâ”€â”€ epic-feats-database.js        # Epic feat prerequisites and effects
â””â”€â”€ epic-spell-progression.js     # Spellcaster level advancement
```

**Epic System Requirements:**
- Support for character levels 21-100 with SRD-compliant rules
- Epic attack bonus: +1 per odd level above 20 (21, 23, 25...)
- Epic save bonus: +1 per even level above 20 (22, 24, 26...)
- Epic feat selection every 3 levels starting at 21 (21, 24, 27, 30...)
- Epic spellcaster progression with Improved Spell Capacity feats
- Divine ascension system supporting divine ranks 0 through 21+
- Multiclass epic progression with proper cross-class restrictions
- Performance target: < 100ms calculation time per level advancement

**Character Object Epic Integration:**
```javascript
// Add to central character object:
epicProgression: {
  epicLevel: 0,                    // Levels above 20 (0-80)
  epicAttackBonus: 0,             // +1 per odd epic level
  epicSaveBonus: 0,               // +1 per even epic level  
  epicFeats: [],                  // Epic feats selected
  divineRank: null,               // 0-21+ for divine ascension
  divineAbilities: [],            // Divine powers gained
  epicSpellcaster: {
    improvedSpellCapacity: {},    // Additional spell slots
    casterLevelBonus: 0          // Epic caster level bonus
  }
}
```

#### ðŸ”¥ Story Tracker System (FR-009) - REQUIRED  
**ALL D&D Character Creator implementations MUST include comprehensive backstory and narrative management.**

**Story Tracker Directory Structure:**
```
code-repository/src/story/
â”œâ”€â”€ story-tracker.js             # Core StoryTracker class
â”œâ”€â”€ backstory-generator.js       # Automatic story generation engine
â”œâ”€â”€ story-event-manager.js       # Timeline and event tracking
â”œâ”€â”€ relationship-manager.js      # Character relationship system  
â”œâ”€â”€ narrative-templates.js       # Template-based story construction
â””â”€â”€ story-integration.js         # Character sheet integration

code-repository/src/data/story-templates/
â”œâ”€â”€ race-based-stories.js        # Race-specific narrative templates
â”œâ”€â”€ class-based-stories.js       # Class-specific background elements
â”œâ”€â”€ background-stories.js        # Background-specific story hooks
â”œâ”€â”€ relationship-templates.js    # NPC and PC relationship frameworks
â””â”€â”€ plot-hook-generators.js      # Automatic plot hook creation
```

**Story System Requirements:**
- Automatic backstory generation based on character stats, race, class, and background
- Template-based guided creation with pre-defined narrative elements
- Free-form story editing with rich text and media support
- Story event tracking with timeline organization
- Character relationship management with NPCs and other PCs
- Plot hook generation tied to character background and goals
- Integration with character sheet as dedicated story tab/section
- Export capabilities for story elements and complete narratives

**Character Object Story Integration:**
```javascript
// Add to central character object:
backstory: {
  generatedStory: "",             // Auto-generated backstory text
  customStory: "",                // User-edited story content
  storyEvents: [],                // Timeline of character events
  relationships: {
    family: [],                   // Family member relationships
    allies: [],                   // Allied NPCs and PCs
    enemies: [],                  // Enemy relationships
    mentors: [],                  // Teacher/mentor figures
    contacts: []                  // General contacts and acquaintances
  },
  plotHooks: [],                  // Generated plot hooks for DM
  personalityTraits: [],          // Character personality elements
  ideals: [],                     // Character ideals and motivations
  bonds: [],                      // Important character bonds
  flaws: [],                      // Character flaws and weaknesses
  goals: {
    shortTerm: [],               // Immediate character goals
    longTerm: [],                // Life-long aspirations
    completed: []                // Achieved goals
  },
  storyAssets: {
    portraits: [],               // Character portrait variations
    locations: [],               // Important location images
    items: [],                   // Significant item illustrations
    npcs: []                     // Related NPC portraits
  }
}
```

#### ðŸ”¥ High-Performance Dice Rolling Subsystem (FR-011) - REQUIRED
**ALL D&D Character Creator implementations MUST include a cryptographically secure, high-performance dice rolling subsystem.**

**Dice Rolling Directory Structure:**
```
code-repository/src/dice/
â”œâ”€â”€ dice-engine.js               # Core DiceEngine class with CSPRNG
â”œâ”€â”€ dice-parser.js               # Parse complex dice expressions
â”œâ”€â”€ dice-roller.js               # High-performance rolling operations
â”œâ”€â”€ dice-validator.js            # Statistical validation and testing
â”œâ”€â”€ roll-history.js              # Roll history and analytics
â””â”€â”€ dice-animation.js            # Optional visual dice rolling effects

code-repository/src/data/dice-rules/
â”œâ”€â”€ standard-dice.js             # Standard RPG dice definitions (d2-d100)
â”œâ”€â”€ dice-expressions.js          # Complex expression templates and examples
â”œâ”€â”€ statistical-tests.js         # Chi-square and distribution validation data
â””â”€â”€ dice-presets.js              # Common D&D roll presets (4d6dl1, etc.)
```

**Dice System Requirements:**
- Cryptographically secure randomness via Web Crypto API (`crypto.getRandomValues()`)
- High-quality fallback PRNG (Mersenne Twister) for unsupported environments
- Support for all standard RPG dice (d2, d3, d4, d6, d8, d10, d12, d20, d100)
- Complex dice expression parsing ("3d6+2", "4d6dl1", "2d20kh1", exploding dice)
- Drop/keep mechanics (drop lowest/highest, keep highest/lowest)
- Performance targets: < 1ms per roll, < 10ms for 100+ dice batches
- Statistical validation ensuring uniform distribution
- Comprehensive roll history with timestamps and detailed results
- Memory-efficient operation with automatic cleanup

**Character Object Dice Integration:**
```javascript
// Add to central character object:
diceHistory: {
  recentRolls: [],                // Last 100 rolls with full details
  sessionStats: {
    totalRolls: 0,               // Total rolls this session
    averageRoll: 0,              // Average roll value
    distributionStats: {},       // Statistical distribution data
    lastRollTime: null           // Timestamp of most recent roll
  },
  rollPreferences: {
    animationSpeed: 1.0,         // Dice animation speed multiplier
    showDetails: true,           // Show individual die results
    autoCleanup: true,           // Auto-cleanup old roll history
    statisticalValidation: true  // Enable statistical validation
  }
}
```

**Integration Points:**
- Ability Score Generation: 4d6dl1, 3d6, point buy validation rolls
- Combat Systems: Attack rolls, damage rolls, saving throws
- Character Creation: Starting gold calculation, random selections
- Epic Level Systems: Epic progression random elements
- Story Generation: Random backstory generation, plot hook selection
- Equipment Systems: Random starting equipment, treasure rolls

**Performance Requirements:**
- Single die roll completion: < 1ms
- Batch rolls (100 dice): < 10ms  
- Complex expressions (5+ operations): < 5ms
- Roll history memory usage: < 100KB per 1000 rolls
- Statistical validation: Pass chi-square test (p > 0.05) over 10,000 rolls

## Central Character Object Architecture

### Core Character Structure
The character object is the single source of truth for all character data:

```javascript
const characterModel = {
  // Basic Information
  id: "unique-character-id",
  name: "Character Name",
  level: 1,
  experience: 0,
  
  // Abilities (3d6 or point buy or 4d6 drop lowest)
  abilities: {
    strength: { base: 10, racial: 0, enhancement: 0, total: 10, modifier: 0 },
    dexterity: { base: 10, racial: 0, enhancement: 0, total: 10, modifier: 0 },
    constitution: { base: 10, racial: 0, enhancement: 0, total: 10, modifier: 0 },
    intelligence: { base: 10, racial: 0, enhancement: 0, total: 10, modifier: 0 },
    wisdom: { base: 10, racial: 0, enhancement: 0, total: 10, modifier: 0 },
    charisma: { base: 10, racial: 0, enhancement: 0, total: 10, modifier: 0 }
  },
  
  // Race Information
  race: {
    name: "Human",
    size: "Medium",
    speed: 30,
    abilityModifiers: [],
    specialAbilities: [],
    languages: ["Common"]
  },
  
  // Class Information  
  classes: [{
    name: "Fighter",
    level: 1,
    hitDie: "d10",
    skillPoints: 2,
    classFeatures: [],
    spellsKnown: [],
    spellsPerDay: []
  }],
  
  // Combat Statistics
  combat: {
    hitPoints: { total: 10, current: 10, temporary: 0 },
    armorClass: { total: 10, armor: 0, shield: 0, dex: 0, size: 0, natural: 0, deflection: 0 },
    baseAttackBonus: 1,
    saves: {
      fortitude: { base: 2, ability: 0, magic: 0, misc: 0, total: 2 },
      reflex: { base: 0, ability: 0, magic: 0, misc: 0, total: 0 },
      will: { base: 0, ability: 0, magic: 0, misc: 0, total: 0 }
    }
  },
  
  // Skills
  skills: {
    // Each skill: { ranks: 0, ability: "str", total: 0, classSkill: false }
  },
  
  // Feats
  feats: [],
  
  // Equipment
  equipment: {
    weapons: [],
    armor: [],
    gear: [],
    money: { copper: 0, silver: 0, gold: 0, platinum: 0 }
  },
  
  // Spells (for spellcasters)
  spells: {
    level0: { known: [], perDay: 0 },
    level1: { known: [], perDay: 0 }
    // ... up to level9
  }
};
```

## SRD Data Implementation

### Data File Structure
Each SRD data file must export a JavaScript object:

```javascript
// srd-races.js example
const SRD_RACES = {
  human: {
    name: "Human",
    size: "Medium",
    speed: 30,
    abilityModifiers: [],
    bonusFeats: 1,
    bonusSkillPoints: 1,
    automaticLanguages: ["Common"],
    bonusLanguages: "any",
    specialAbilities: [],
    favoredClass: "any"
  },
  dwarf: {
    name: "Dwarf", 
    size: "Medium",
    speed: 20,
    abilityModifiers: [
      { ability: "constitution", modifier: 2 },
      { ability: "charisma", modifier: -2 }
    ],
    specialAbilities: [
      "Darkvision 60 ft",
      "Stonecunning",
      "+4 dodge bonus to AC against monsters of the giant type",
      "+2 racial bonus on saving throws against poison",
      "+2 racial bonus on saving throws against spells and spell-like effects"
    ],
    automaticLanguages: ["Common", "Dwarven"],
    bonusLanguages: ["Giant", "Gnome", "Goblin", "Orc", "Terran"],
    favoredClass: "fighter"
  }
  // ... other races
};
```

### Rules Engine Implementation
The rules engine validates all character modifications:

```javascript
// rules-engine.js example structure
class RulesEngine {
  validateAbilityScore(score) {
    return score >= 3 && score <= 18;
  }
  
  calculateAbilityModifier(score) {
    return Math.floor((score - 10) / 2);
  }
  
  validateFeatPrerequisites(character, feat) {
    // Implementation for feat prerequisite checking
  }
  
  validateMulticlassXPPenalty(character) {
    // Implementation for multiclass XP penalty rules
  }
}
```

## Implementation Guidelines

### 1. Start with Core Foundation
**Order of Implementation:**
1. **MANDATORY: High-Performance Dice Rolling Subsystem (`dice/dice-engine.js`) - FOUNDATIONAL REQUIREMENT**
2. Character object model (`character.js`) - **MUST include epicProgression, backstory, and diceHistory properties**
3. Basic ability score generation (`ability-manager.js`) - **MUST use dice subsystem for 4d6dl1**
4. Race selection system (`race-manager.js`)
5. Class selection system (`class-manager.js`)
6. Skill allocation (`skill-manager.js`)
7. Feat selection (`feat-manager.js`)
8. Equipment system (`equipment-manager.js`) - **MUST use dice subsystem for starting gold**
9. **MANDATORY: Epic Level Engine (`epic/epic-level-engine.js`) - Support levels 21-100**
10. **MANDATORY: Story Tracker System (`story/story-tracker.js`) - Backstory management**
11. Character sheet display (`ui-controller.js`) - **MUST include Epic, Story, and Dice History tabs**

**Dice System Implementation Priority (MUST BE FIRST):**
- Phase 1: Core CSPRNG dice engine with basic die types (d4, d6, d8, d10, d12, d20)
- Phase 2: Complex expression parser for dice notation ("4d6dl1", "2d20kh1")
- Phase 3: Drop/keep mechanics and exploding dice functionality  
- Phase 4: Statistical validation and roll history management
- Phase 5: Performance optimization and visual dice animation

**Epic Level Implementation Priority:**
- Phase 1: Basic epic progression (levels 21-100, attack/save bonuses)
- Phase 2: Epic feat system with prerequisite validation
- Phase 3: Epic spellcaster advancement with Improved Spell Capacity
- Phase 4: Divine ascension system (divine ranks 0-21+)
- Phase 5: Epic multiclass progression rules

**Story System Implementation Priority:**
- Phase 1: Basic backstory generator with race/class templates - **MUST use dice subsystem for random generation**
- Phase 2: Story event tracking and timeline management
- Phase 3: Character relationship system (NPCs, allies, enemies)
- Phase 4: Plot hook generation tied to character background - **MUST use dice subsystem for random hooks**
- Phase 5: Media integration and story asset management

### 2. D&D 3.5 SRD Compliance Rules

**Ability Scores:**
- Standard generation: 4d6 drop lowest, arrange to taste
- Point buy system with 25-point buy as option
- Racial modifiers applied after base generation
- Ability modifiers calculated as (score - 10) / 2 rounded down

**Skill Points:**
- Class skill points + Intelligence modifier + racial bonuses
- Minimum 1 skill point per level regardless of Intelligence penalty
- Cross-class skills cost 2 skill points for 1 rank
- Maximum ranks = character level + 3 (class skills) or (character level + 3) / 2 (cross-class)

**Saving Throws:**
- Base save from class + ability modifier + magic + misc
- Good saves: +2 at 1st level, +3 at 3rd level, etc.
- Poor saves: +0 at 1st level, +1 at 3rd level, etc.

**Base Attack Bonus:**
- High BAB: +1 per level
- Medium BAB: +3/4 per level  
- Low BAB: +1/2 per level

### 3. Error Handling and Validation

**Input Validation:**
```javascript
function validateCharacterData(character) {
  const errors = [];
  
  // Validate ability scores
  for (const ability in character.abilities) {
    const score = character.abilities[ability].total;
    if (score < 3 || score > 18) {
      errors.push(`${ability} score ${score} is invalid (must be 3-18)`);
    }
  }
  
  // Validate skill point allocation
  const totalSkillPoints = calculateAvailableSkillPoints(character);
  const usedSkillPoints = calculateUsedSkillPoints(character);
  if (usedSkillPoints > totalSkillPoints) {
    errors.push("Too many skill points allocated");
  }
  
  // MANDATORY: Validate epic level progression
  if (character.level > 20 && character.epicProgression) {
    const expectedEpicLevel = character.level - 20;
    if (character.epicProgression.epicLevel !== expectedEpicLevel) {
      errors.push("Epic level progression mismatch");
    }
    
    // Validate epic attack bonus (+1 per odd epic level)
    const expectedEpicAttack = Math.floor((expectedEpicLevel + 1) / 2);
    if (character.epicProgression.epicAttackBonus !== expectedEpicAttack) {
      errors.push("Epic attack bonus calculation error");
    }
    
    // Validate epic save bonus (+1 per even epic level)  
    const expectedEpicSave = Math.floor(expectedEpicLevel / 2);
    if (character.epicProgression.epicSaveBonus !== expectedEpicSave) {
      errors.push("Epic save bonus calculation error");
    }
  }
  
  // MANDATORY: Validate story system integrity
  if (character.backstory) {
    if (character.backstory.storyEvents && 
        !Array.isArray(character.backstory.storyEvents)) {
      errors.push("Story events must be an array");
    }
    
    if (character.backstory.relationships &&
        typeof character.backstory.relationships !== 'object') {
      errors.push("Character relationships must be an object");
    }
  }
  
  // MANDATORY: Validate dice system integrity and performance
  if (character.diceHistory) {
    if (character.diceHistory.recentRolls && 
        !Array.isArray(character.diceHistory.recentRolls)) {
      errors.push("Dice roll history must be an array");
    }
    
    if (character.diceHistory.sessionStats &&
        typeof character.diceHistory.sessionStats !== 'object') {
      errors.push("Dice session statistics must be an object");
    }
    
    // Validate dice roll statistical integrity
    const stats = character.diceHistory.sessionStats;
    if (stats && stats.totalRolls > 1000) {
      // Check for statistical anomalies in large datasets
      if (stats.averageRoll && (stats.averageRoll < 1 || stats.averageRoll > 20)) {
        errors.push("Dice roll statistics show potential RNG issues");
      }
    }
  }
  
  return errors;
}
```

**User-Friendly Error Messages:**
- Clear, actionable error messages
- Highlight specific fields with errors
- Prevent invalid state transitions
- Graceful degradation on data corruption

### 4. Performance Optimization

**Lazy Loading:**
- Load SRD data files only when needed
- Cache frequently accessed calculations
- Minimize DOM manipulation

**Memory Management:**
- Avoid memory leaks in event handlers
- Clean up temporary calculations
- Use efficient data structures

### 5. Local Storage Integration

**Character Persistence:**
```javascript
function saveCharacter(character) {
  const characterData = JSON.stringify(character);
  localStorage.setItem(`character-${character.id}`, characterData);
}

function loadCharacter(characterId) {
  const characterData = localStorage.getItem(`character-${characterId}`);
  return characterData ? JSON.parse(characterData) : null;
}

function listSavedCharacters() {
  const characters = [];
  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    if (key.startsWith('character-')) {
      characters.push(JSON.parse(localStorage.getItem(key)));
    }
  }
  return characters;
}
```

## Testing Requirements

### Unit Testing
- Test each manager class independently
- Mock dependencies for isolated testing
- Cover edge cases and error conditions
- Validate SRD rule implementations

### Integration Testing  
- Test character creation workflow end-to-end
- Verify data consistency across components
- Test local storage persistence
- Cross-browser compatibility testing

### Performance Testing
- Measure character creation time
- Test with maximum complexity characters
- Memory usage monitoring
- Mobile device performance

## Development Best Practices

### Code Style
- Use ES6+ features (const/let, arrow functions, destructuring)
- Consistent naming conventions (camelCase)
- Clear function and variable names
- Comprehensive comments for complex logic

### Architecture Principles
- Single responsibility principle for each manager
- Immutable character state modifications
- Event-driven architecture for UI updates
- Clear separation of concerns

### Error Prevention
- Input validation at all entry points
- Defensive programming for data access
- Graceful handling of corrupted save data
- Clear user feedback for all operations

## Security Considerations

### Input Sanitization
- Sanitize all user text input
- Prevent XSS in character names/descriptions
- Validate file uploads (if any)

### Data Protection
- No sensitive data storage
- Local storage only for character data
- No external network requests required

## Browser Compatibility Strategy

### Progressive Enhancement
- Core functionality works in all target browsers
- Enhanced features for modern browsers
- Graceful degradation for older browsers

### Feature Detection
```javascript
// Example feature detection
function supportsLocalStorage() {
  try {
    const test = '__test__';
    localStorage.setItem(test, test);
    localStorage.removeItem(test);
    return true;
  } catch (e) {
    return false;
  }
}
```

## Deployment Instructions

### File Structure for Deployment
- Single HTML file entry point
- All JavaScript files loadable via `<script>` tags
- CSS files linked via `<link>` tags
- No build process required
- Works from file:// protocol for offline use

### Testing Before Release
1. Run all automated tests
2. Manual testing in all target browsers
3. Performance validation on mobile devices
4. Accessibility testing
5. Complete character creation workflows

## Documentation Requirements

### Code Documentation
- JSDoc comments for all public methods
- Inline comments for complex algorithms
- API documentation for all managers
- Usage examples for all major features

### User Documentation
- Character creation guide
- D&D 3.5 rule explanations where needed
- Troubleshooting guide
- Browser compatibility notes

## Final Reminders

1. **ðŸš¨ ALL CODE MUST BE IN `code-repository/` FOLDER**
2. JavaScript ES6+ only - no external libraries
3. Central character object is single source of truth
4. Comprehensive SRD rule implementation required
5. Full test coverage before considering complete
6. Browser compatibility across all targets
7. Clean, maintainable, well-documented code

Follow these instructions precisely to create a robust, compliant D&D 3.5 character creation tool that meets all requirements and provides an excellent user experience.

---
**Created**: September 20, 2025  
**Version**: 1.0  
**Status**: Ready for implementation