<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Functionality Test - RulzLawyer</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .test-result { margin: 10px 0; padding: 10px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        button { margin: 5px; padding: 10px 15px; }
    </style>
</head>
<body>
    <h1>RulzLawyer Button Functionality Test</h1>
    
    <div class="test-section">
        <h2>Dice Rolling Functions</h2>
        <button onclick="testRollDice()">Test Roll Dice</button>
        <button onclick="testRollAdvantage()">Test Roll Advantage</button>
        <button onclick="testRollDisadvantage()">Test Roll Disadvantage</button>
        <div id="dice-results"></div>
    </div>

    <div class="test-section">
        <h2>Character Management Functions</h2>
        <button onclick="testCreateNewCharacter()">Test Create New Character</button>
        <button onclick="testShowCharacterStats()">Test Show Character Stats</button>
        <button onclick="testSelectCharacter()">Test Select Character</button>
        <div id="character-results"></div>
    </div>

    <div class="test-section">
        <h2>Random Table Functions</h2>
        <button onclick="testRollRandomTables()">Test Roll Random Tables</button>
        <button onclick="testRollSingleTable()">Test Roll Single Table</button>
        <div id="table-results"></div>
    </div>

    <div class="test-section">
        <h2>Modal Functions</h2>
        <button onclick="testCloseModal()">Test Close Modal</button>
        <div id="modal-results"></div>
    </div>

    <script src="code-repository/src/web-interface.js"></script>
    <script>
        function testFunction(functionName, testFn) {
            const resultDiv = document.getElementById(functionName.toLowerCase().replace(/([A-Z])/g, '-$1') + '-results');
            try {
                testFn();
                addResult(resultDiv, `✅ ${functionName} - Function exists and executed`, 'success');
            } catch (error) {
                addResult(resultDiv, `❌ ${functionName} - Error: ${error.message}`, 'error');
            }
        }

        function addResult(container, message, className) {
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${className}`;
            resultDiv.textContent = message;
            if (!container) {
                console.error('Container not found for result:', message);
                return;
            }
            container.appendChild(resultDiv);
        }

        function testRollDice() {
            testFunction('rollDice', () => {
                if (typeof window.rollDice !== 'function') {
                    throw new Error('rollDice function not found');
                }
                window.rollDice(20);
            });
        }

        function testRollAdvantage() {
            testFunction('rollAdvantage', () => {
                if (typeof window.rollAdvantage !== 'function') {
                    throw new Error('rollAdvantage function not found');
                }
                window.rollAdvantage();
            });
        }

        function testRollDisadvantage() {
            testFunction('rollDisadvantage', () => {
                if (typeof window.rollDisadvantage !== 'function') {
                    throw new Error('rollDisadvantage function not found');
                }
                window.rollDisadvantage();
            });
        }

        function testCreateNewCharacter() {
            testFunction('createNewCharacter', () => {
                if (typeof window.createNewCharacter !== 'function') {
                    throw new Error('createNewCharacter function not found');
                }
                window.createNewCharacter();
            });
        }

        function testShowCharacterStats() {
            testFunction('showCharacterStats', () => {
                if (typeof window.showCharacterStats !== 'function') {
                    throw new Error('showCharacterStats function not found');
                }
                window.showCharacterStats();
            });
        }

        function testSelectCharacter() {
            testFunction('selectCharacter', () => {
                if (typeof window.selectCharacter !== 'function') {
                    throw new Error('selectCharacter function not found');
                }
                window.selectCharacter('test-character');
            });
        }

        function testRollRandomTables() {
            testFunction('rollRandomTables', () => {
                if (typeof window.rollRandomTables !== 'function') {
                    throw new Error('rollRandomTables function not found');
                }
                window.rollRandomTables();
            });
        }

        function testRollSingleTable() {
            testFunction('rollSingleTable', () => {
                if (typeof window.rollSingleTable !== 'function') {
                    throw new Error('rollSingleTable function not found');
                }
                window.rollSingleTable('personality');
            });
        }

        function testCloseModal() {
            testFunction('closeModal', () => {
                if (typeof window.closeModal !== 'function') {
                    throw new Error('closeModal function not found');
                }
                window.closeModal();
            });
        }

        // Auto-run tests when page loads
        window.addEventListener('load', () => {
            console.log('Running automatic button functionality tests...');
            setTimeout(() => {
                const results = {
                    dice: document.getElementById('dice-results'),
                    character: document.getElementById('character-results'),
                    table: document.getElementById('table-results'),
                    modal: document.getElementById('modal-results')
                };

                // Test all functions
                const functions = [
                    'rollDice', 'rollAdvantage', 'rollDisadvantage',
                    'createNewCharacter', 'showCharacterStats', 'selectCharacter',
                    'rollRandomTables', 'rollSingleTable', 'closeModal'
                ];

                functions.forEach(funcName => {
                    let category = 'dice';
                    if (funcName.includes('Character') || funcName === 'selectCharacter') category = 'character';
                    else if (funcName.includes('Table')) category = 'table';
                    else if (funcName.includes('Modal')) category = 'modal';

                    try {
                        if (typeof window[funcName] === 'function') {
                            addResult(results[category], `✅ ${funcName} - Function available`, 'success');
                        } else {
                            addResult(results[category], `❌ ${funcName} - Function missing`, 'error');
                        }
                    } catch (error) {
                        addResult(results[category], `❌ ${funcName} - Error: ${error.message}`, 'error');
                    }
                });
            }, 1000);
        });
    </script>
</body>
</html>