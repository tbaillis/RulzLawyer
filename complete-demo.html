<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≤ RulzLawyer D&D 3.5 - Complete Demo</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e8e6e3;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #d4af37;
            font-size: 3rem;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .demo-section {
            background: rgba(255,255,255,0.1);
            border: 2px solid #d4af37;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            backdrop-filter: blur(10px);
        }
        .demo-section h2 {
            color: #d4af37;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 0.5rem;
        }
        button {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a1a2e;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            margin: 0.5rem 0.5rem 0.5rem 0;
            transition: transform 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(212, 175, 55, 0.3);
        }
        .output {
            background: rgba(0,0,0,0.3);
            border: 1px solid #444;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .character-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        .stat-block {
            background: rgba(0,0,0,0.2);
            padding: 1rem;
            border-radius: 6px;
            border-left: 4px solid #d4af37;
        }
        .spell-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #444;
            border-radius: 6px;
            padding: 1rem;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #17a2b8; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé≤ RulzLawyer D&D 3.5 Complete Demo</h1>
        
        <!-- System Status -->
        <div class="demo-section">
            <h2>üîß System Status</h2>
            <div id="system-status" class="output">Loading systems...</div>
        </div>

        <!-- Character Creation Demo -->
        <div class="demo-section">
            <h2>üë§ Character Creation System</h2>
            <button onclick="createRandomCharacter()">Create Random Character</button>
            <button onclick="createSpecificCharacter()">Create Specific Character</button>
            <button onclick="levelUpDemo()">Level Up Demo</button>
            
            <div id="character-output" class="output">No character created yet.</div>
            <div id="character-details" class="character-display"></div>
        </div>

        <!-- Spell System Demo -->
        <div class="demo-section">
            <h2>‚ú® Spell Management System</h2>
            <button onclick="demonstrateSpells()">Show Spell Database</button>
            <button onclick="castSpellDemo()">Spell Casting Demo</button>
            <button onclick="spellSlotsDemo()">Spell Slots Demo</button>
            
            <div id="spell-output" class="output">Click buttons to demonstrate spell system.</div>
        </div>

        <!-- Equipment System Demo -->
        <div class="demo-section">
            <h2>‚öîÔ∏è Equipment & Inventory System</h2>
            <button onclick="showWeapons()">Show Weapons</button>
            <button onclick="showArmor()">Show Armor</button>
            <button onclick="equipmentDemo()">Equipment Demo</button>
            <button onclick="treasureDemo()">Generate Treasure</button>
            
            <div id="equipment-output" class="output">Click buttons to explore equipment system.</div>
        </div>

        <!-- Adventure Generation Demo -->
        <div class="demo-section">
            <h2>üó∫Ô∏è Adventure Generation System</h2>
            <button onclick="generateDungeon()">Generate Dungeon</button>
            <button onclick="generateWilderness()">Generate Wilderness</button>
            <button onclick="generateEncounter()">Random Encounter</button>
            <button onclick="generateNPC()">Generate NPC</button>
            
            <div id="adventure-output" class="output">Click buttons to generate adventures and encounters.</div>
        </div>

        <!-- Dice System Demo -->
        <div class="demo-section">
            <h2>üé≤ Advanced Dice System</h2>
            <button onclick="basicDiceDemo()">Basic Dice Rolls</button>
            <button onclick="advancedDiceDemo()">Advanced Rolls</button>
            <button onclick="combatDemo()">Combat Simulation</button>
            
            <div id="dice-output" class="output">Click buttons to test dice rolling system.</div>
        </div>
    </div>

    <!-- Load all game systems -->
    <script src="code-repository/src/dice-engine.js"></script>
    <script src="code-repository/src/srd-data.js"></script>
    <script src="code-repository/src/spell-manager.js"></script>
    <script src="code-repository/src/equipment-manager.js"></script>
    <script src="code-repository/src/random-tables-index.js"></script>
    <script src="code-repository/src/character-manager.js"></script>
    <script src="code-repository/src/adventure-engine.js"></script>
    <script src="code-repository/src/storage-manager.js"></script>
    <script src="app.js"></script>

    <script>
        // Demo state
        let currentCharacter = null;
        let gameEngine = null;

        // Wait for game engine to initialize
        setTimeout(() => {
            gameEngine = window.gameEngine;
            initializeDemo();
        }, 1000);

        function initializeDemo() {
            updateSystemStatus();
            log('üéâ RulzLawyer Demo Ready! Explore all the D&D 3.5 systems below.');
        }

        function updateSystemStatus() {
            const status = document.getElementById('system-status');
            if (!gameEngine) {
                status.innerHTML = '<span class="error">‚ùå Game engine not loaded</span>';
                return;
            }

            const info = gameEngine.getSystemInfo();
            const statusText = `
<span class="success">‚úÖ RulzLawyer v${info.version} - All Systems Operational</span>

System Components:
‚Ä¢ Dice Engine: ${info.systems.diceEngine ? '‚úÖ' : '‚ùå'} ${info.systems.diceEngine ? 'Ready' : 'Failed'}
‚Ä¢ Character Manager: ${info.systems.characterManager ? '‚úÖ' : '‚ùå'} ${info.systems.characterManager ? 'Ready' : 'Failed'}  
‚Ä¢ Spell Manager: ${info.systems.spellManager ? '‚úÖ' : '‚ùå'} ${info.systems.spellManager ? 'Ready' : 'Failed'}
‚Ä¢ Equipment Manager: ${info.systems.equipmentManager ? '‚úÖ' : '‚ùå'} ${info.systems.equipmentManager ? 'Ready' : 'Failed'}
‚Ä¢ Adventure Engine: ${info.systems.adventureEngine ? '‚úÖ' : '‚ùå'} ${info.systems.adventureEngine ? 'Ready' : 'Failed'}
‚Ä¢ Storage Manager: ${info.systems.storageManager ? '‚úÖ' : '‚ùå'} ${info.systems.storageManager ? 'Ready' : 'Failed'}

<span class="info">Ready for full D&D 3.5 SRD gaming experience!</span>`;
            
            status.innerHTML = statusText;
        }

        // Character System Demos
        function createRandomCharacter() {
            if (!gameEngine) return;

            const races = ['human', 'elf', 'dwarf', 'halfling', 'gnome', 'half-elf', 'half-orc'];
            const classes = ['fighter', 'wizard', 'cleric', 'rogue', 'ranger', 'barbarian', 'bard', 'druid', 'monk', 'paladin', 'sorcerer'];
            
            const randomRace = races[Math.floor(Math.random() * races.length)];
            const randomClass = classes[Math.floor(Math.random() * classes.length)];
            const names = ['Aerdrie', 'Bhaal', 'Cyric', 'Drizzt', 'Elminster', 'Farideh', 'Gareth', 'Halaster', 'Imoen', 'Minsc'];
            const randomName = names[Math.floor(Math.random() * names.length)];

            try {
                currentCharacter = gameEngine.characterManager.createCharacter({
                    name: randomName,
                    race: randomRace,
                    class: randomClass,
                    level: Math.ceil(Math.random() * 5)
                });

                displayCharacter(currentCharacter);
                log(`üé≤ Created random character: ${currentCharacter.name}!`, 'character-output');
            } catch (error) {
                log(`‚ùå Error creating character: ${error.message}`, 'character-output');
            }
        }

        function createSpecificCharacter() {
            if (!gameEngine) return;

            try {
                currentCharacter = gameEngine.characterManager.createCharacter({
                    name: 'Gandalf the Grey',
                    race: 'human',
                    class: 'wizard',
                    level: 20
                });

                displayCharacter(currentCharacter);
                log(`‚ú® Created legendary wizard: ${currentCharacter.name}!`, 'character-output');
            } catch (error) {
                log(`‚ùå Error creating character: ${error.message}`, 'character-output');
            }
        }

        function levelUpDemo() {
            if (!currentCharacter) {
                log('‚ùå Create a character first!', 'character-output');
                return;
            }

            try {
                const oldLevel = currentCharacter.level;
                gameEngine.characterManager.levelUpCharacter(currentCharacter, currentCharacter.class);
                displayCharacter(currentCharacter);
                log(`üìà ${currentCharacter.name} leveled up from ${oldLevel} to ${currentCharacter.level}!`, 'character-output');
            } catch (error) {
                log(`‚ùå Level up failed: ${error.message}`, 'character-output');
            }
        }

        function displayCharacter(char) {
            const details = document.getElementById('character-details');
            details.innerHTML = `
                <div class="stat-block">
                    <h3>${char.name}</h3>
                    <p><strong>Race:</strong> ${char.race.charAt(0).toUpperCase() + char.race.slice(1)}</p>
                    <p><strong>Class:</strong> ${char.class.charAt(0).toUpperCase() + char.class.slice(1)}</p>
                    <p><strong>Level:</strong> ${char.level}</p>
                    <p><strong>HP:</strong> ${char.hitPoints.current}/${char.hitPoints.maximum}</p>
                    <p><strong>AC:</strong> ${char.armorClass}</p>
                    <p><strong>Status:</strong> ${char.status.charAt(0).toUpperCase() + char.status.slice(1)}</p>
                </div>
                <div class="stat-block">
                    <h3>Ability Scores</h3>
                    <p><strong>STR:</strong> ${char.abilities.strength} (${Math.floor((char.abilities.strength - 10) / 2) >= 0 ? '+' : ''}${Math.floor((char.abilities.strength - 10) / 2)})</p>
                    <p><strong>DEX:</strong> ${char.abilities.dexterity} (${Math.floor((char.abilities.dexterity - 10) / 2) >= 0 ? '+' : ''}${Math.floor((char.abilities.dexterity - 10) / 2)})</p>
                    <p><strong>CON:</strong> ${char.abilities.constitution} (${Math.floor((char.abilities.constitution - 10) / 2) >= 0 ? '+' : ''}${Math.floor((char.abilities.constitution - 10) / 2)})</p>
                    <p><strong>INT:</strong> ${char.abilities.intelligence} (${Math.floor((char.abilities.intelligence - 10) / 2) >= 0 ? '+' : ''}${Math.floor((char.abilities.intelligence - 10) / 2)})</p>
                    <p><strong>WIS:</strong> ${char.abilities.wisdom} (${Math.floor((char.abilities.wisdom - 10) / 2) >= 0 ? '+' : ''}${Math.floor((char.abilities.wisdom - 10) / 2)})</p>
                    <p><strong>CHA:</strong> ${char.abilities.charisma} (${Math.floor((char.abilities.charisma - 10) / 2) >= 0 ? '+' : ''}${Math.floor((char.abilities.charisma - 10) / 2)})</p>
                </div>
            `;
        }

        // Spell System Demos
        function demonstrateSpells() {
            if (!gameEngine) return;

            const spells = gameEngine.spellManager.spellDatabase;
            const spellCount = Object.keys(spells).length;
            
            let output = `‚ú® D&D 3.5 Spell Database: ${spellCount} spells loaded\n\n`;
            
            // Show some example spells by level
            for (let level = 0; level <= 3; level++) {
                const levelSpells = Object.values(spells).filter(spell => spell.level === level);
                output += `Level ${level} spells (${levelSpells.length} total):\n`;
                levelSpells.slice(0, 5).forEach(spell => {
                    output += `  ‚Ä¢ ${spell.name} (${spell.school})\n`;
                });
                if (levelSpells.length > 5) {
                    output += `  ... and ${levelSpells.length - 5} more\n`;
                }
                output += '\n';
            }

            log(output, 'spell-output');
        }

        function castSpellDemo() {
            if (!gameEngine) return;

            const testSpells = ['magic missile', 'fireball', 'cure light wounds', 'shield', 'web'];
            let output = 'üî• Spell Casting Demonstration:\n\n';

            testSpells.forEach(spellName => {
                const spell = gameEngine.spellManager.spellDatabase[spellName];
                if (spell) {
                    output += `Casting ${spell.name}:\n`;
                    output += `  Level: ${spell.level} | School: ${spell.school}\n`;
                    output += `  Casting Time: ${spell.castingTime}\n`;
                    output += `  Range: ${spell.range}\n`;
                    if (spell.damage) output += `  Damage: ${spell.damage}\n`;
                    output += `  ${spell.description.substring(0, 100)}...\n\n`;
                }
            });

            log(output, 'spell-output');
        }

        function spellSlotsDemo() {
            if (!currentCharacter) {
                log('‚ùå Create a spellcasting character first!', 'spell-output');
                return;
            }

            try {
                const slots = gameEngine.spellManager.getSpellSlots(currentCharacter);
                let output = `üéØ Spell Slots for ${currentCharacter.name} (${currentCharacter.class} ${currentCharacter.level}):\n\n`;

                if (Object.keys(slots).length === 0) {
                    output += 'This character is not a spellcaster.\n';
                } else {
                    Object.entries(slots).forEach(([level, slotInfo]) => {
                        output += `Level ${level}: ${slotInfo.available}/${slotInfo.total} slots available\n`;
                    });
                }

                log(output, 'spell-output');
            } catch (error) {
                log(`‚ùå Error getting spell slots: ${error.message}`, 'spell-output');
            }
        }

        // Equipment System Demos
        function showWeapons() {
            if (!gameEngine) return;

            const weapons = gameEngine.equipmentManager.weapons;
            let output = '‚öîÔ∏è Weapon Arsenal:\n\n';

            Object.entries(weapons).slice(0, 10).forEach(([key, weapon]) => {
                output += `${weapon.name}:\n`;
                output += `  Type: ${weapon.type} | Damage: ${weapon.damage}\n`;
                output += `  Cost: ${weapon.cost} gp | Weight: ${weapon.weight} lbs\n\n`;
            });

            output += `... and ${Object.keys(weapons).length - 10} more weapons in database.\n`;
            log(output, 'equipment-output');
        }

        function showArmor() {
            if (!gameEngine) return;

            const armor = gameEngine.equipmentManager.armor;
            let output = 'üõ°Ô∏è Armor Collection:\n\n';

            Object.entries(armor).slice(0, 8).forEach(([key, armorItem]) => {
                output += `${armorItem.name}:\n`;
                output += `  Type: ${armorItem.type} | AC Bonus: +${armorItem.acBonus}\n`;
                output += `  Cost: ${armorItem.cost} gp | Weight: ${armorItem.weight} lbs\n\n`;
            });

            log(output, 'equipment-output');
        }

        function equipmentDemo() {
            if (!currentCharacter) {
                log('‚ùå Create a character first!', 'equipment-output');
                return;
            }

            try {
                // Equip some sample items
                const longsword = gameEngine.equipmentManager.weapons['longsword'];
                const chainmail = gameEngine.equipmentManager.armor['chain mail'];

                let output = `‚öîÔ∏è Equipping ${currentCharacter.name}:\n\n`;
                
                if (longsword) {
                    output += `Equipped: ${longsword.name}\n`;
                    output += `  Damage: ${longsword.damage}\n`;
                    output += `  Properties: ${longsword.properties || 'Standard weapon'}\n\n`;
                }

                if (chainmail) {
                    output += `Equipped: ${chainmail.name}\n`;
                    output += `  AC Bonus: +${chainmail.acBonus}\n`;
                    output += `  Max Dex Bonus: +${chainmail.maxDexBonus}\n\n`;
                }

                output += `Updated Character Stats:\n`;
                output += `  AC: ${currentCharacter.armorClass}\n`;
                output += `  Attack Bonus: +${currentCharacter.baseAttackBonus}\n`;

                log(output, 'equipment-output');
            } catch (error) {
                log(`‚ùå Equipment error: ${error.message}`, 'equipment-output');
            }
        }

        function treasureDemo() {
            if (!gameEngine) return;

            try {
                const treasure = gameEngine.equipmentManager.generateTreasure(5, 'medium');
                let output = 'üí∞ Treasure Generation (Level 5, Medium Encounter):\n\n';

                if (treasure.coins) {
                    output += 'Coins Found:\n';
                    Object.entries(treasure.coins).forEach(([type, amount]) => {
                        if (amount > 0) {
                            output += `  ${amount} ${type}\n`;
                        }
                    });
                    output += '\n';
                }

                if (treasure.items && treasure.items.length > 0) {
                    output += 'Items Found:\n';
                    treasure.items.forEach(item => {
                        output += `  ‚Ä¢ ${item.name} (${item.value || 'Priceless'})\n`;
                    });
                }

                log(output, 'equipment-output');
            } catch (error) {
                log(`‚ùå Treasure generation error: ${error.message}`, 'equipment-output');
            }
        }

        // Adventure System Demos
        function generateDungeon() {
            if (!gameEngine) return;

            try {
                const adventure = gameEngine.adventureEngine.generateAdventure({
                    partyLevel: 3,
                    adventureType: 'dungeon',
                    length: 'medium'
                });

                let output = `üè∞ ${adventure.title || 'Dungeon Adventure'}\n\n`;
                output += `${adventure.description}\n\n`;
                
                if (adventure.encounters) {
                    output += 'Key Encounters:\n';
                    adventure.encounters.slice(0, 3).forEach((enc, i) => {
                        output += `${i + 1}. ${enc.description}\n`;
                    });
                }

                log(output, 'adventure-output');
            } catch (error) {
                log(`‚ùå Adventure generation error: ${error.message}`, 'adventure-output');
            }
        }

        function generateWilderness() {
            if (!gameEngine) return;

            try {
                const adventure = gameEngine.adventureEngine.generateAdventure({
                    partyLevel: 2,
                    adventureType: 'wilderness',
                    length: 'long'
                });

                let output = `üå≤ ${adventure.title || 'Wilderness Adventure'}\n\n`;
                output += `${adventure.description}\n\n`;

                log(output, 'adventure-output');
            } catch (error) {
                log(`‚ùå Adventure generation error: ${error.message}`, 'adventure-output');
            }
        }

        function generateEncounter() {
            if (!gameEngine) return;

            try {
                const encounter = gameEngine.adventureEngine.generateEncounter(4);
                
                let output = `‚öîÔ∏è Random Encounter (Party Level 4):\n\n`;
                output += `Type: ${encounter.type}\n`;
                output += `Challenge Rating: ${encounter.challengeRating}\n\n`;
                output += `${encounter.description}\n\n`;
                
                if (encounter.tactics) {
                    output += `Tactics: ${encounter.tactics}\n`;
                }

                log(output, 'adventure-output');
            } catch (error) {
                log(`‚ùå Encounter generation error: ${error.message}`, 'adventure-output');
            }
        }

        function generateNPC() {
            if (!gameEngine) return;

            try {
                const races = ['human', 'elf', 'dwarf', 'halfling'];
                const classes = ['fighter', 'wizard', 'cleric', 'rogue'];
                const npc = gameEngine.characterManager.createCharacter({
                    name: 'Generated NPC',
                    race: races[Math.floor(Math.random() * races.length)],
                    class: classes[Math.floor(Math.random() * classes.length)],
                    level: Math.ceil(Math.random() * 8)
                });

                let output = `üë§ Generated NPC:\n\n`;
                output += `Name: ${npc.name}\n`;
                output += `Race: ${npc.race.charAt(0).toUpperCase() + npc.race.slice(1)}\n`;
                output += `Class: ${npc.class.charAt(0).toUpperCase() + npc.class.slice(1)}\n`;
                output += `Level: ${npc.level}\n`;
                output += `HP: ${npc.hitPoints.maximum}\n`;
                output += `AC: ${npc.armorClass}\n`;
                output += `STR: ${npc.abilities.strength} DEX: ${npc.abilities.dexterity} CON: ${npc.abilities.constitution}\n`;
                output += `INT: ${npc.abilities.intelligence} WIS: ${npc.abilities.wisdom} CHA: ${npc.abilities.charisma}\n`;

                log(output, 'adventure-output');
            } catch (error) {
                log(`‚ùå NPC generation error: ${error.message}`, 'adventure-output');
            }
        }

        // Dice System Demos
        function basicDiceDemo() {
            if (!gameEngine) return;

            let output = 'üé≤ Basic Dice Rolling Demo:\n\n';
            const rolls = ['1d4', '1d6', '1d8', '1d10', '1d12', '1d20', '1d100', '3d6', '4d6'];

            rolls.forEach(roll => {
                const result = gameEngine.diceEngine.roll(roll);
                output += `${roll}: ${result}\n`;
            });

            log(output, 'dice-output');
        }

        function advancedDiceDemo() {
            if (!gameEngine) return;

            let output = 'üé≤ Advanced Dice Rolling Demo:\n\n';
            const advancedRolls = [
                '4d6kh3',    // Keep highest 3 of 4d6
                '2d20kh1',   // Keep highest of 2d20 (advantage)
                '1d20+5',    // Standard attack roll
                '8d6',       // Fireball damage
                '1d8+3',     // Longsword damage
                '2d6+1d4+2'  // Complex damage roll
            ];

            advancedRolls.forEach(roll => {
                try {
                    const result = gameEngine.diceEngine.roll(roll);
                    output += `${roll}: ${result}\n`;
                } catch (error) {
                    output += `${roll}: ERROR - ${error.message}\n`;
                }
            });

            log(output, 'dice-output');
        }

        function combatDemo() {
            if (!gameEngine) return;

            let output = '‚öîÔ∏è Combat Simulation:\n\n';
            
            // Simulate a combat round
            output += 'Fighter attacks with longsword:\n';
            const attackRoll = gameEngine.diceEngine.roll('1d20+8');
            output += `  Attack roll: ${attackRoll}\n`;
            
            if (attackRoll >= 15) {
                const damage = gameEngine.diceEngine.roll('1d8+4');
                output += `  Hit! Damage: ${damage}\n`;
            } else {
                output += '  Miss!\n';
            }

            output += '\nWizard casts Magic Missile:\n';
            const missiles = gameEngine.diceEngine.roll('1d4+1');
            const missileDamage = gameEngine.diceEngine.roll(`${missiles}d4+${missiles}`);
            output += `  ${missiles} missiles for ${missileDamage} damage\n`;

            output += '\nSaving Throws:\n';
            output += `  Fortitude: ${gameEngine.diceEngine.roll('1d20+5')}\n`;
            output += `  Reflex: ${gameEngine.diceEngine.roll('1d20+3')}\n`;
            output += `  Will: ${gameEngine.diceEngine.roll('1d20+7')}\n`;

            log(output, 'dice-output');
        }

        function log(message, outputId = 'system-status') {
            const output = document.getElementById(outputId);
            output.textContent = message;
        }
    </script>
</body>
</html>